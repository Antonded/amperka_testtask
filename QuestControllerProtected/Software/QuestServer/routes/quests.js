var _x46695=["../libs/log","Router","express","../scriptDirector","./middleware","../stats","../libs/config","../firmwareServer","setRemote","remote","setiOS","iOS","setAndroid","Android","getRoomKeys","length","id","name","room","getRoom","tariff","active","script","getRoomObj","maninthemiddle","addUser","","setURL","URL","getURL","setName","getName","get","/logs/:start/:length","requireUser","requireAdmin","getLogs","render","2.0/logs","user","signedCookies","logs","start","params","logSize","/dashboard","2.0/dashboard","guest","/login","2.0/login","error","query","/logout","clearCookie","redirect","post","/auth","login","body","password","/","rememberMe","on","maxAge","cookie","/login?error=1","/quests/:quest","2.0/quest","quest","running","/quests/:quest/nodes","2.0/nodes","tracklist","../data/lib.json","/quests/:quest/cams","2.0/cams","/quests/:quest/sensors","2.0/sensors","/quests/:quest/admin","2.0/admin","getEnabled","/stats","getAllQuests","2.0/stats","/quests/:quest/calendar/data","getCalendarData","/calendar/data","getFullCalendarData","/quests/:quest/calendar","2.0/calendar","/calendar","/quests/:quest/questLog/:gameId","getQuestEvents","gameId","getQuest","gameEvents","2.0/gameLog","/quests/:quest/start/:lang","activeLang","lang","startQuest","send","ok","/quests/:quest/stop","info","Stop quest from button or link","stopQuest","/quests/:quest/firmware/:action","action","os","/systemInfo","floor","serverStartTime"," дн. ","0"," ч "," мин "," сек","uptime","2.0/systemInfo","version","freemem","totalmem","networkInterfaces","/firmware","2.0/firmware","getState","jquery-file-upload-middleware","configure","/tmp/","/firmware/upload/:roomId/:nodeId","fileHandler","end","addFirmwareFile","roomId","nodeId","/rtc/:device","intercom","device","exports"],_x37267=[_x46695[0],_x46695[1],_x46695[2],_x46695[3],_x46695[4],_x46695[5],_x46695[6],_x46695[7],_x46695[8],_x46695[9],_x46695[10],_x46695[11],_x46695[12],_x46695[13],_x46695[14],_x46695[15],_x46695[16],_x46695[17],_x46695[18],_x46695[19],_x46695[20],_x46695[21],_x46695[22],_x46695[23],_x46695[24],_x46695[25],_x46695[26],_x46695[27],_x46695[28],_x46695[29],_x46695[30],_x46695[31],_x46695[32],_x46695[33],_x46695[34],_x46695[35],_x46695[36],_x46695[37],_x46695[38],_x46695[39],_x46695[40],_x46695[41],_x46695[42],_x46695[43],_x46695[44],_x46695[45],_x46695[46],_x46695[47],_x46695[48],_x46695[49],_x46695[50],_x46695[51],_x46695[52],_x46695[53],_x46695[54],_x46695[55],_x46695[56],_x46695[57],_x46695[58],_x46695[59],_x46695[60],_x46695[61],_x46695[62],_x46695[63],_x46695[64],_x46695[65],_x46695[66],_x46695[67],_x46695[68],_x46695[69],_x46695[70],_x46695[71],_x46695[72],_x46695[73],_x46695[74],_x46695[75],_x46695[76],_x46695[77],_x46695[78],_x46695[79],_x46695[80],_x46695[81],_x46695[82],_x46695[83],_x46695[84],_x46695[85],_x46695[86],_x46695[87],_x46695[88],_x46695[89],_x46695[90],_x46695[91],_x46695[92],_x46695[93],_x46695[94],_x46695[95],_x46695[96],_x46695[97],_x46695[98],_x46695[99],_x46695[100],_x46695[101],_x46695[102],_x46695[103],_x46695[104],_x46695[105],_x46695[106],_x46695[107],_x46695[108],_x46695[109],_x46695[110],_x46695[111],_x46695[112],_x46695[113],_x46695[114],_x46695[115],_x46695[116],_x46695[117],_x46695[118],_x46695[119],_x46695[120],_x46695[121],_x46695[122],_x46695[123],_x46695[124],_x46695[125],_x46695[126],_x46695[127],_x46695[128],_x46695[129],_x46695[130],_x46695[131],_x46695[132],_x46695[133],_x46695[134],_x46695[135],_x46695[136],_x46695[137],_x46695[138],_x46695[139]],log=require(_x37267[0])(module),router=require(_x37267[2])[_x37267[1]](),scriptDirector=require(_x37267[3]),middleware=require(_x37267[4]),stats=require(_x37267[5]),config=require(_x37267[6]),firmware=require(_x37267[7]),roomsObj=[],scriptObj={},questConfig={remote:!1,iOS:!1,Android:!1};router[_x37267[8]]=function(x){questConfig[_x37267[9]]=x},router[_x37267[10]]=function(x){questConfig[_x37267[11]]=x},router[_x37267[12]]=function(x){questConfig[_x37267[13]]=x};for(var roomKeys=scriptDirector[_x37267[14]](),i=0;i<roomKeys[_x37267[15]];i++)roomsObj[i]={},roomsObj[i][_x37267[16]]=roomKeys[i],roomsObj[i][_x37267[17]]=scriptDirector[_x37267[19]](roomKeys[i])[_x37267[18]][_x37267[17]],roomsObj[i][_x37267[20]]=scriptDirector[_x37267[19]](roomKeys[i])[_x37267[18]][_x37267[20]],roomsObj[i][_x37267[21]]=scriptDirector[_x37267[19]](roomKeys[i])[_x37267[18]][_x37267[21]],scriptObj[roomsObj[i][_x37267[16]]]=scriptDirector[_x37267[19]](roomKeys[i])[_x37267[22]];router[_x37267[23]]=function(){return roomsObj};var users={admin:_x37267[24]};router[_x37267[25]]=function(x,_){users[x]=_};var link={URL:_x37267[26],name:_x37267[26]};router[_x37267[27]]=function(x,_){link[_x37267[17]]=x,link[_x37267[28]]=_},router[_x37267[29]]=function(){return link};var name=_x37267[26];router[_x37267[30]]=function(x){name=x},router[_x37267[31]]=function(){return name},router[_x37267[32]](_x37267[33],middleware[_x37267[34]],middleware[_x37267[35]],middleware[_x37267[36]],function(x,_){_[_x37267[37]](_x37267[38],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,scripts:scriptObj,logs:_[_x37267[41]],start:x[_x37267[43]][_x37267[42]],length:x[_x37267[43]][_x37267[15]],logSize:_[_x37267[44]],link:link,name:name})}),router[_x37267[32]](_x37267[45],function(x,_){x[_x37267[40]][_x37267[39]]?_[_x37267[37]](_x37267[46],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,scripts:scriptObj,link:link,name:name}):_[_x37267[37]](_x37267[46],{user:_x37267[47],rooms:roomsObj,scripts:scriptObj,link:link,name:name})}),router[_x37267[32]](_x37267[48],function(x,_){_[_x37267[37]](_x37267[49],{loginFailed:1==x[_x37267[51]][_x37267[50]]})}),router[_x37267[32]](_x37267[52],function(x,_){_[_x37267[53]](_x37267[39],{}),_[_x37267[54]](_x37267[45])}),router[_x37267[55]](_x37267[56],function(x,_){if(users[x[_x37267[58]][_x37267[57]]]===x[_x37267[58]][_x37267[59]]){var e={signed:!0,path:_x37267[60]};x[_x37267[58]][_x37267[61]]===_x37267[62]&&(e[_x37267[63]]=2534023e8),_[_x37267[64]](_x37267[39],x[_x37267[58]][_x37267[57]],e),_[_x37267[54]](_x37267[45])}else _[_x37267[54]](_x37267[65])}),router[_x37267[32]](_x37267[66],middleware[_x37267[34]],function(x,_){_[_x37267[37]](_x37267[67],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,room:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[18]],script:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[22]],running:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[69]],link:link,name:name})}),router[_x37267[32]](_x37267[70],middleware[_x37267[34]],function(x,_){_[_x37267[37]](_x37267[71],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,room:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[18]],trackList:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[72]],lib:require(_x37267[73]),link:link,name:name})}),router[_x37267[32]](_x37267[74],middleware[_x37267[34]],function(x,_){_[_x37267[37]](_x37267[75],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,room:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[18]],link:link,name:name})}),router[_x37267[32]](_x37267[76],middleware[_x37267[34]],function(x,_){_[_x37267[37]](_x37267[77],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,room:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[18]],script:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[22]],lib:require(_x37267[73]),link:link,name:name})}),router[_x37267[32]](_x37267[78],middleware[_x37267[34]],middleware[_x37267[35]],function(x,_){_[_x37267[37]](_x37267[79],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,room:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[18]],script:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[22]],lib:require(_x37267[73]),firmwareEnabled:firmware[_x37267[80]](x[_x37267[43]][_x37267[68]]),link:link,name:name})}),router[_x37267[32]](_x37267[81],middleware[_x37267[34]],middleware[_x37267[35]],function(x,_){stats[_x37267[82]](function(e){_[_x37267[37]](_x37267[83],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,link:link,name:name,stats:e})})}),router[_x37267[32]](_x37267[84],middleware[_x37267[34]],middleware[_x37267[85]]),router[_x37267[32]](_x37267[86],middleware[_x37267[34]],middleware[_x37267[35]],middleware[_x37267[87]]),router[_x37267[32]](_x37267[88],middleware[_x37267[34]],function(x,_){_[_x37267[37]](_x37267[89],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,room:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[18]],link:link,name:name})}),router[_x37267[32]](_x37267[90],middleware[_x37267[34]],middleware[_x37267[35]],function(x,_){_[_x37267[37]](_x37267[89],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,link:link,name:name})}),router[_x37267[32]](_x37267[91],middleware[_x37267[34]],middleware[_x37267[35]],function(x,_){stats[_x37267[92]](x[_x37267[43]][_x37267[93]],function(e){stats[_x37267[94]](x[_x37267[43]][_x37267[93]],function(r){r[_x37267[95]]=e,_[_x37267[37]](_x37267[96],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,room:scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]])[_x37267[18]],link:link,name:name,stat:r})})})}),router[_x37267[55]](_x37267[97],middleware[_x37267[34]],function(x,_){var e=scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]]);e[_x37267[18]][_x37267[98]]=x[_x37267[43]][_x37267[99]],e[_x37267[100]](),_[_x37267[101]](_x37267[102])}),router[_x37267[55]](_x37267[103],middleware[_x37267[34]],function(x,_){_[_x37267[101]](_x37267[102]);var e=scriptDirector[_x37267[19]](x[_x37267[43]][_x37267[68]]);log[_x37267[104]](_x37267[105]),e&&e[_x37267[106]]()}),router[_x37267[55]](_x37267[107],middleware[_x37267[34]],middleware[_x37267[35]],function(x,_){firmware[_x37267[108]](x[_x37267[43]][_x37267[68]],x[_x37267[43]][_x37267[108]]),_[_x37267[101]](_x37267[102])}),router[_x37267[32]](_x37267[60],function(x,_){_[_x37267[54]](_x37267[45])});var OS=require(_x37267[109]);router[_x37267[32]](_x37267[110],middleware[_x37267[34]],function(x,_){var e=Math[_x37267[111]]((new Date-global[_x37267[112]])/1e3),r=parseInt(e/86400),o=parseInt(e/3600)%24,t=parseInt(e/60)%60,i=e%60,s=r+_x37267[113]+(o<10?_x37267[114]+o:o)+_x37267[115]+(t<10?_x37267[114]+t:t)+_x37267[116]+(i<10?_x37267[114]+i:i)+_x37267[117];e=OS[_x37267[118]](),r=parseInt(e/86400),o=parseInt(e/3600)%24,t=parseInt(e/60)%60,i=e%60;var n=r+_x37267[113]+(o<10?_x37267[114]+o:o)+_x37267[115]+(t<10?_x37267[114]+t:t)+_x37267[116]+(i<10?_x37267[114]+i:i)+_x37267[117];_[_x37267[37]](_x37267[119],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,config:questConfig,link:link,name:name,version:config[_x37267[32]](_x37267[120]),uptime:s,freeRAM:parseInt(OS[_x37267[121]]()/1048576),RAM:parseInt(OS[_x37267[122]]()/1048576),serverUptime:n,network:OS[_x37267[123]]()})}),router[_x37267[32]](_x37267[124],middleware[_x37267[34]],middleware[_x37267[35]],function(x,_){_[_x37267[37]](_x37267[125],{user:x[_x37267[40]][_x37267[39]],rooms:roomsObj,link:link,name:name,nodesToUpdate:firmware[_x37267[126]]()})});var upload=require(_x37267[127]);upload[_x37267[128]]({uploadDir:_x37267[129]}),router[_x37267[55]](_x37267[130],middleware[_x37267[34]],middleware[_x37267[35]],upload[_x37267[131]]()),upload[_x37267[62]](_x37267[132],function(x,_){firmware[_x37267[133]](_[_x37267[43]][_x37267[134]],_[_x37267[43]][_x37267[135]],_x37267[129]+x[_x37267[17]])}),router[_x37267[32]](_x37267[136],middleware[_x37267[34]],function(x,_){_[_x37267[37]](_x37267[137],{device:x[_x37267[43]][_x37267[138]]})}),module[_x37267[139]]=router;