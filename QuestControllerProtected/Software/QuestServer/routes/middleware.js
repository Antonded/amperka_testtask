var _x21451=["fs","../libs/log","../stats","../libs/dbHelper","requireUser","user","signedCookies","redirect","/dashboard","requireAdmin","admin","getLogs","start","params","length","getLogsPerPage","logSize","logs","push","total","hours","allGames","0","minutes","monthDay","month","getFullYear","startDate","_id","Игра '","name","' ","/"," в ",":","/quests/","id","/questLog/","event-success","UnixTime","EndUnixTime","getCalendarData","from","query","to","getQuestsWithPeriod","quest","send","event-info","event-warning","event-special","event-important","event-inverse","getFullCalendarData","hasOwnProperty","class","result"],_x30421=[_x21451[0],_x21451[1],_x21451[2],_x21451[3],_x21451[4],_x21451[5],_x21451[6],_x21451[7],_x21451[8],_x21451[9],_x21451[10],_x21451[11],_x21451[12],_x21451[13],_x21451[14],_x21451[15],_x21451[16],_x21451[17],_x21451[18],_x21451[19],_x21451[20],_x21451[21],_x21451[22],_x21451[23],_x21451[24],_x21451[25],_x21451[26],_x21451[27],_x21451[28],_x21451[29],_x21451[30],_x21451[31],_x21451[32],_x21451[33],_x21451[34],_x21451[35],_x21451[36],_x21451[37],_x21451[38],_x21451[39],_x21451[40],_x21451[41],_x21451[42],_x21451[43],_x21451[44],_x21451[45],_x21451[46],_x21451[47],_x21451[48],_x21451[49],_x21451[50],_x21451[51],_x21451[52],_x21451[53],_x21451[54],_x21451[55],_x21451[56]],fs=require(_x30421[0]),log=require(_x30421[1])(module),stats=require(_x30421[2]),dbHelper=require(_x30421[3]);exports[_x30421[4]]=function(x,_,e){x[_x30421[6]][_x30421[5]]?e():_[_x30421[7]](_x30421[8])},exports[_x30421[9]]=function(x,_,e){x[_x30421[6]][_x30421[5]]!=_x30421[10]?_[_x30421[7]](_x30421[8]):e()},exports[_x30421[11]]=function(x,_,e){var t=Number(x[_x30421[13]][_x30421[12]]),r=Number(x[_x30421[13]][_x30421[14]]);dbHelper[_x30421[15]](t-1,r,function(x){if(_[_x30421[16]]=0,_[_x30421[17]]=[],x){_[_x30421[16]]=x[_x30421[14]];for(var t=0;t<_[_x30421[16]];t++)_[_x30421[17]][_x30421[18]](x[t])}e()})};var makeQuestStat=function(x){var _=[];if(x)for(var e=0;e<x[_x30421[19]];e++){var t=x[_x30421[21]][e][_x30421[20]];t<10&&(t=_x30421[22]+t);var r=x[_x30421[21]][e][_x30421[23]];r<10&&(r=_x30421[22]+r);var s=x[_x30421[21]][e][_x30421[24]];s<10&&(s=_x30421[22]+s);var a=x[_x30421[21]][e][_x30421[25]]+1;a<10&&(a=_x30421[22]+a);var n=x[_x30421[21]][e][_x30421[27]][_x30421[26]]();_[_x30421[18]]({id:x[_x30421[21]][e][_x30421[28]],title:_x30421[29]+x[_x30421[30]]+_x30421[31]+s+_x30421[32]+a+_x30421[32]+n+_x30421[33]+t+_x30421[34]+r,url:_x30421[35]+x[_x30421[36]]+_x30421[37]+x[_x30421[21]][e][_x30421[28]],class:_x30421[38],start:x[_x30421[21]][e][_x30421[39]],end:x[_x30421[21]][e][_x30421[40]]})}return _};exports[_x30421[41]]=function(x,_){var e=new Date(Number(x[_x30421[43]][_x30421[42]])),t=new Date(Number(x[_x30421[43]][_x30421[44]]));stats[_x30421[45]](e,t,function(e){var t={success:1,result:makeQuestStat(e[x[_x30421[13]][_x30421[46]]])};_[_x30421[47]](t)})};var eventTypes=[_x30421[38],_x30421[48],_x30421[49],_x30421[50],_x30421[51],_x30421[52]];exports[_x30421[53]]=function(x,_){var e=new Date(Number(x[_x30421[43]][_x30421[42]])),t=new Date(Number(x[_x30421[43]][_x30421[44]]));stats[_x30421[45]](e,t,function(x){var e={success:1,result:[]},t=0;for(var r in x)if(x[_x30421[54]](r)){for(var s=makeQuestStat(x[r]),a=0;a<s[_x30421[14]];a++)s[a][_x30421[55]]=eventTypes[t],e[_x30421[56]][_x30421[18]](s[a]);t=(t+1)%eventTypes[_x30421[14]]}_[_x30421[47]](e)})};